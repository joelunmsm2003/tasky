<!DOCTYPE html>

<html>


<head>

  {% include "monitoreo/mhead.html" %}


  <style type="text/css">
  .hide { display: none;}
  .show { display: block;}
  </style>


  <script src="https://apis.google.com/js/plusone.js" type="text/javascript"></script>
  <script src="//http://codeorigin.jquery.com/jquery-1.10.2.min.js"></script>
  <meta name="google-signin-client_id" content="1070083693984-p2pnpjqophajqub4gvruo3q14nb9vt3j.apps.googleusercontent.com">


  <script type="text/javascript">

function loginFinishedCallback(authResult) {
    if (authResult) {
      if (authResult['error'] == undefined){
        gapi.auth.setToken(authResult); // Almacena el token recuperado.
        toggleElement('signin-button'); // Oculta el inicio de sesión si se ha accedido correctamente.
        getEmail();                     // Activa la solicitud para obtener la dirección de correo electrónico.
      } else {
        console.log('An error occurred');
      }
    } else {
      console.log('Empty authResult');  // Se ha producido algún error
    }
  }

function getEmail(){
    // Carga las bibliotecas oauth2 para habilitar los métodos userinfo.
    gapi.client.load('oauth2', 'v2', function() {
          var request = gapi.client.oauth2.userinfo.get();
          request.execute(getEmailCallback);
        });
  }

  function getEmailCallback(obj){
    var el = document.getElementById('email');
    var email = '';

    if (obj['email']) {
      email = 'Email: ' + obj['email'];
    }
     el.innerHTML = email;
    toggleElement('email');
  }

  function toggleElement(id) {
    var el = document.getElementById(id);
    if (el.getAttribute('class') == 'hide') {
      el.setAttribute('class', 'show');
    } else {
      el.setAttribute('class', 'hide');
    }
  }

  </script>

</head>









         <script>  
                (function(d,s,id) {  
                    var js, fjs = d.getElementsByTagName(s)[0];  
                    if(d.getElementById(id)) return;  
                    js = d.createElement(s); js.id = id;  
                    js.src = "http://connect.facebook.net/es_ES/sdk.js";  
                    fjs.parentNode.insertBefore(js, fjs);  
                }(document, 'script', 'facebook-jssdk'));  
                window.fbAsyncInit = function() {  
                    FB.init({  
                        appId    : '1500156153610921',  
                        cookie   : true,  
                        status   : true,
                        xfbml    : true,  
                        version  : 'v2.4'  
                    });  
                }  


          </script>  


<body ng-app="myApp" ng-controller="Todo">


     <!-- Coloca este JavaScript asíncrono justo delante de la etiqueta </body> -->
    <script type="text/javascript">
      (function() {
       var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
       po.src = 'https://apis.google.com/js/client:plusone.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
     })();
    </script>



{% include "monitoreo/head.html" %}

<div class="container">
    <div class="row">

        <div class="col s12">
            <h4 class="center-align">Registrate</h4>
         

             <div class="row">
                <form class="col s12" action='/loger/' method='POST'>

                  {% csrf_token %}

                  <div class="row">
       
<<<<<<< HEAD
                    <div class="input-field col s12 m4">
                      <input ng-model ='registro.nombre' id="last_name" type="text" class="validate">
                      <label for="last_name">Nombre</label>
                    </div>

                    <div class="input-field col s12 m4">
                      <input ng-model ='registro.email' type="email" class="validate">
                      <label for="email">Email</label>
                    </div>
                    
               
                    <div class="input-field col s12 m4 ">
                      <input ng-model ='registro.password' id="password" type="password" class="validate">
                      <label for="password">Password</label>
                    </div>
                 
                    
=======
                    <div class="input-field col s12">
                      <input id="last_name" type="text" class="validate">
                      <label for="last_name">Nombre</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input id="password" type="password" class="validate">
                      <label for="password">Password</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input id="email" type="email" class="validate">
                      <label for="email">Email</label>
                    </div>
>>>>>>> 8e0fd631f18527757d94f27d0d3ba90efed75de5
                  </div>

                </form>

                <div class="divider"></div>
                          <div class="row">
                            <div class="col s4">
                            <p class="center-align">
                                <button ng-click='Login()' class="btn btn-large waves-effect waves-light" type="submit" name="action">Registrar</button>
                            </p>

                  
                           </div>


<div id="my-signin2"></div>


  <script>
    function onSuccess(googleUser) {
      console.log('Google Plus');
      console.log('UserName: ' + googleUser.getBasicProfile().getName());
      console.log('Email: ' + googleUser.getBasicProfile().getEmail());
    }
    function onFailure(error) {
      console.log(error);
    }
    function renderButton() {
      gapi.signin2.render('my-signin2', {
        'scope': 'https://www.googleapis.com/auth/plus.login',
        'width': 200,
        'height': 50,
        'longtitle': true,
        'theme': 'dark',
        'onsuccess': onSuccess,
        'onfailure': onFailure
      });
    }

 </script>

<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>


<div id="email" class="hide"></div>

                    </div>

                </div>

<fb:login-button scope="public_profile,email" onlogin="validarUsuario()"></fb:login-button> 

        </div>



    </div>
</div> 

{% include "monitoreo/footer.html" %}

  <script type="text/javascript">

    $(".button-collapse").sideNav();


    $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
    });
        
    function validarUsuario() {

<<<<<<< HEAD
        FB.api('/me',{fields: 'email'},function(email){
                
=======

      console.log('Facebook');

      FB.api('/me',{fields: 'email'},function(email){
              
>>>>>>> 8e0fd631f18527757d94f27d0d3ba90efed75de5

                console.log(email);

        });

        FB.api('/me',function(name){
          

                console.log(name);

        });


    }



  </script>   

</body>

</html>